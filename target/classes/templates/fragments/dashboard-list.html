<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<body>

    <!-- ========================= -->
    <!-- LISTA EM CARDS -->
    <!-- ========================= -->
    <div th:fragment="list">

        <div class="flex justify-between items-center mb-6">
            <h4 class="text-lg font-bold text-gray-800"
                th:text="${tituloLista != null ? tituloLista : 'Lista de Processos'}">
                Lista de Processos
            </h4>

            <a href="/processos" class="text-sm font-medium text-blue-600 hover:text-blue-800 transition-colors">
                Ver todos
            </a>
        </div>


        <!-- vazio -->
        <div th:if="${processos == null or #lists.isEmpty(processos)}" class="text-center py-12 text-gray-500">

            <div class="mb-3">
                <i class="fas fa-inbox text-4xl text-gray-300"></i>
            </div>

            <p>Nenhum processo encontrado nesta categoria.</p>

        </div>


        <!-- lista -->
        <div th:unless="${processos == null or #lists.isEmpty(processos)}"
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">


            <div th:each="processo : ${processos}"
                class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-all group relative">


                <!-- header -->
                <div class="flex justify-between items-start mb-3">

                    <div class="w-8 h-8 rounded-lg flex items-center justify-center text-sm" th:classappend="${processo.status == 'Concluído'} ? 'bg-green-50 text-green-600' :
                                     (${processo.status == 'Em Andamento'} ? 'bg-amber-50 text-amber-600' :
                                     'bg-red-50 text-red-600')">

                        <i th:if="${processo.status == 'Concluído'}" class="fas fa-check"></i>

                        <i th:if="${processo.status == 'Em Andamento'}" class="fas fa-clock"></i>

                        <i th:if="${processo.status == null or processo.status == 'Pendente'}"
                            class="fas fa-exclamation"></i>

                    </div>


                    <span class="text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-full" th:classappend="${processo.status == 'Concluído'} ? 'bg-green-50 text-green-600' :
                                      (${processo.status == 'Em Andamento'} ? 'bg-amber-50 text-amber-600' :
                                      'bg-red-50 text-red-600')"
                        th:text="${processo.status != null ? processo.status : 'Pendente'}">

                        STATUS

                    </span>

                </div>


                <!-- conteudo -->
                <div class="mb-3">

                    <h5 class="font-bold text-gray-800 text-sm mb-1 truncate" th:text="${processo.numeroProcesso}">
                    </h5>


                    <div class="flex items-center text-xs text-gray-500 mb-1">

                        <i class="far fa-user mr-1.5 opacity-70"></i>

                        <span class="truncate"
                            th:text="${processo.cliente != null ? processo.cliente.nome : 'Sem cliente'}">
                        </span>

                    </div>


                    <div class="flex items-center text-xs text-gray-500">

                        <i class="fas fa-gavel mr-1.5 opacity-70"></i>

                        <span th:text="${processo.tipo != null ? processo.tipo : '-'}">
                        </span>

                    </div>

                </div>


                <!-- footer -->
                <div class="pt-3 mt-1 border-t border-gray-50 flex justify-between items-center">


                    <span class="text-[11px] text-gray-400 font-medium" th:text="${processo.dataAbertura != null ?
                                #temporals.format(processo.dataAbertura, 'dd/MM/yyyy')
                                : '-'}">
                    </span>


                    <a th:href="@{/processos/{id}(id=${processo.id})}"
                        class="text-blue-600 hover:text-blue-800 text-xs font-semibold flex items-center gap-1 group-hover:gap-2 transition-all">

                        Detalhes

                        <i class="fas fa-arrow-right text-[10px]"></i>

                    </a>

                </div>


            </div>

        </div>

    </div>



    <!-- ========================= -->
    <!-- TABELA PROCESSOS -->
    <!-- ========================= -->
    <div th:fragment="table">

        <div class="d-flex align-items-center justify-content-between mb-3">

            <h4 class="h6 fw-bold mb-0" th:text="${tituloLista != null ? tituloLista : 'Itens relacionados'}">
            </h4>

            <a th:href="${linkVerTodos != null ? linkVerTodos : '/processos'}" class="small text-decoration-none">
                Ver todos
            </a>

        </div>



        <div th:if="${itens == null or #lists.isEmpty(itens)}" class="text-center text-muted py-4">

            Nenhum item encontrado.

        </div>



        <div th:unless="${itens == null or #lists.isEmpty(itens)}" class="table-responsive">


            <table class="table table-sm align-middle mb-0">

                <thead>

                    <tr class="text-uppercase small text-muted">

                        <th>Nº Processo</th>
                        <th>Cliente</th>
                        <th>Tipo</th>
                        <th>Status</th>
                        <th>Data</th>
                        <th>Responsável</th>
                        <th class="text-end">Valor</th>

                    </tr>

                </thead>


                <tbody>


                    <tr th:each="processo : ${itens}">


                        <td class="small" th:text="${processo.numeroProcesso}">
                        </td>


                        <td class="small" th:text="${processo.cliente != null ? processo.cliente.nome : '-'}">
                        </td>


                        <td class="small">

                            <span class="badge bg-light text-dark border"
                                th:text="${processo.tipo != null ? processo.tipo : '-'}">
                            </span>

                        </td>


                        <td class="small">

                            <span class="badge" th:classappend="${processo.status == 'Concluído'} ? ' bg-success' :
                                          (${processo.status == 'Em Andamento'} ? ' bg-warning text-dark' :
                                          ' bg-danger')"
                                th:text="${processo.status != null ? processo.status : 'Pendente'}">

                            </span>

                        </td>


                        <td class="small text-nowrap" th:text="${processo.dataAbertura != null ?
                              #temporals.format(processo.dataAbertura, 'dd/MM/yyyy')
                              : '-'}">

                        </td>


                        <td class="small" th:text="${processo.advogadoResponsavel != null ?
                              processo.advogadoResponsavel.nomeCompleto : '-'}">

                        </td>


                        <td class="small text-end fw-semibold" th:text="${processo.valorCausa != null ?
                              #numbers.formatCurrency(processo.valorCausa)
                              : '-'}">

                        </td>


                    </tr>


                </tbody>


            </table>

        </div>

    </div>


</body>

</html>
